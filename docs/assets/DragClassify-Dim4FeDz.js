import{j as r}from"./index-CRs1o41v.js";import{r as o}from"./react-Disfgg3A.js";import{s as b}from"./progress-BBVrwzPV.js";const v=c=>c[0]??"pool";function T({id:c,groups:l,items:s}){const[n,h]=o.useState(()=>{const e={};return s.forEach(a=>{e[a.id]="pool"}),e}),[i,m]=o.useState(!1),u=o.useMemo(()=>s.filter(e=>n[e.id]==="pool"),[s,n]),g=o.useMemo(()=>l.reduce((e,a)=>(e[a]=s.filter(t=>n[t.id]===a),e),{}),[l,s,n]),d=o.useMemo(()=>{const e=s.length,a=s.filter(t=>n[t.id]===t.group).length;return e?a/e:0},[s,n]),p=e=>e.preventDefault(),x=(e,a)=>{a&&h(t=>({...t,[a]:e}))},f=(e,a)=>{a.preventDefault();const t=a.dataTransfer.getData("text");x(e,t)},D=(e,a)=>{x(e,a)},j=()=>{m(!0);const e=d>.8?3:d>.5?2:1;b(c,{score:d,stars:e,attempts:1,completedAt:Date.now()})};return r.jsxs("div",{className:"grid cols-2",children:[r.jsxs("div",{className:"card","aria-label":"Banco de tarjetas",onDragOver:p,onDrop:e=>f("pool",e),children:[r.jsx("h4",{className:"title",children:"Tarjetas"}),r.jsx("div",{className:"grid",style:{gridTemplateColumns:"repeat(2,minmax(0,1fr))",gap:8},children:u.map(e=>r.jsx("div",{role:"button",tabIndex:0,"aria-label":`Tarjeta ${e.text}`,draggable:!0,onDragStart:a=>a.dataTransfer.setData("text",e.id),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),D(v(l),e.id))},style:{padding:8,borderRadius:12,border:"1px dashed #334155",textAlign:"center"},children:e.text},e.id))})]}),r.jsxs("div",{className:"grid",style:{gap:12},children:[l.map(e=>r.jsxs("div",{className:"card",role:"region","aria-label":`Destino ${e}`,onDragOver:p,onDrop:a=>f(e,a),children:[r.jsx("h4",{className:"title",children:e}),r.jsx("div",{className:"row",style:{flexWrap:"wrap",gap:8},children:g[e]?.map(a=>r.jsx("span",{role:"button",tabIndex:0,draggable:!0,onDragStart:t=>t.dataTransfer.setData("text",a.id),onKeyDown:t=>{(t.key==="Backspace"||t.key==="Delete")&&(t.preventDefault(),D("pool",a.id))},className:"tag",children:a.text},a.id))})]},e)),r.jsxs("div",{className:"row",children:[r.jsx("button",{className:"btn",onClick:j,disabled:i,children:"Comprobar"}),i&&r.jsxs("span",{children:["Resultado: ",(d*100).toFixed(0),"%"]})]})]})]})}export{T as D};
